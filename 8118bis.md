---
title: SQLite 3.35.0でカラムのDROPができるようになったようなので、確認してみた。 - panda大学習帳外伝
description: 個人的には待望だった機能です。
mathjax: true
image: 
twitter: 
  card: summary_large_image
encoding: UTF-8
update: Sat Nov 13 21:36:29 2021 +0900
---
{% include pagelink.md %}
# SQLite 3.35.0でカラムのDROPができるようになったようなので、確認してみた。
{% if page.update %}最終更新日: {{ page.update }} {% endif %}
## はじめに
お試しでSQLite3のCREATE文を出力するExcel VBAのマクロを書くために色々と調べていたところ、

「SQLiteでもついにカラム単位でのDROPができるようになるらしい。」

という情報を入手しました。

↑の情報を入手したタイミングと前後して、自宅やさくらインターネットのVPSで運用している Fedora 34 を 35 にアップグレードするタイミングがたまたま到来したので、Fedoraのアップグレードのついでに SQLite3 のバージョンが 3.35.0 以降に更新されるようであれば、カラム単位でのDROPができるかどうか確認することにしました。

{% include firstad.html %}
## Fedora 34のSQLite3
まず、アップグレード前、すなわち Fedora 34のSQLite3でカラムのDROPを実行するとどうなるか調べてみました。

すると…

```
[panda@pandanote.info ~]$ sqlite3 --version
3.34.1 2021-01-20 14:10:07 10e20c0b43500cfb9bbc0eaa061c57514f715d87238f4d835880cd846b9ealt1
[panda@pandanote.info ~]$ sqlite3 pandanote.db
SQLite version 3.34.1 2021-01-20 14:10:07
Enter ".help" for usage hints.
sqlite> create table sample1( item1 text, item2 text );
sqlite> alter table sample1 add column item3 integer;
sqlite> .schema sample1
CREATE TABLE sample1( item1 text, item2 text , item3 integer);
sqlite> alter table sample1 drop column item2;
Error: near "drop": syntax error
sqlite> .quit
```

という結果になりました。

DROP句を含めたALTER TABLEを実行しようとするとsyntax errorとなることがわかります。

{%include secondintervalad.html %}

## Fedora 35のSQLite3
次にFedora 35へのアップグレード(アップグレード作業についての詳細は[こちら](https://pandanote.info/?p=8118))後にカラムのDROP句を含むALTER TABLE文を発行してみました。

すると…

```
[panda@pandanote.info ~]$ sqlite3 --version
3.36.0 2021-06-18 18:36:39 5c9a6c06871cb9fe42814af9c039eb6da5427a6ec28f187af7ebfb62eafaalt1
sqlite> .schema sample1
CREATE TABLE sample1( item1 text, item2 text , item3 integer);
sqlite> alter table sample1 drop column item2;
sqlite> .schema sample1
CREATE TABLE sample1( item1 text, item3 integer);
sqlite>
```

sample1という名前のデータベースのitem2という名前のカラムの消去を試みましたが、削除されることが確認できました。😎

{%include thirdintervalad.html %}

## まとめ

## リンク
{% include pagelink.md %}

{% include fourthintervalad.html %}
